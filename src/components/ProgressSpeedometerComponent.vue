<template>
  <div class="speedometer-container">
    <h3>üìä –ü—Ä–æ–≥—Ä–µ—Å—Å</h3>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–ø–∏–¥–æ–º–µ—Ç—Ä–∞ -->
    <div class="speedometer-frame">
      <!-- –°—Ç—Ä–µ–ª–∫–∞ -->
      <img
        :src="arrowSrc"
        alt="–°—Ç—Ä–µ–ª–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞"
        class="speedometer-arrow"
        :style="{ transform: 'rotate(' + rotationAngle + 'deg)' }"
      />
    </div>

    <!-- –ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è -->
    <div class="progress-percent">{{ progressPercent }}%</div>
  </div>
</template>

<script>
export default {
  name: 'ProgressSpeedometerComponent',
  props: {
    totalDays: {
      type: Number,
      required: true,
    },
    completedDays: {
      type: Number,
      required: true,
    },
  },
  data() {
    return {
      // –ü—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é —Å—Ç—Ä–µ–ª–∫–∏
      arrowSrc: '/img/arrow.png',
    };
  },
  computed: {
    /**
     * –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
     */
    progressPercent() {
      if (!this.totalDays) return 0;
      const percent = (this.completedDays / this.totalDays) * 100;
      return Math.round(percent);
    },

    /**
     * –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —É–≥–æ–ª –ø–æ–≤–æ—Ä–æ—Ç–∞ —Å—Ç—Ä–µ–ª–∫–∏
     * 0% ‚Äî 0¬∞
     * 100% ‚Äî 180¬∞
     */
    rotationAngle() {
      return (this.progressPercent / 100) * 180;
    },
  },
};
</script>

<style scoped>
.speedometer-container {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 20px;
}

.speedometer-frame {
  position: relative;
  width: 60px;
  height: 30px;
  /* border-top: 4px solid #ccc;
  border-left: 2px solid #ccc;
  border-right: 2px solid #ccc;
  border-radius: 100% 100% 0 0;*/
  padding: 5px;
  background: transparent;
  overflow: hidden;
}

.speedometer-arrow {
  width: 100%;
  height: auto;
  transition: transform 0.3s ease;
}

.progress-percent {
  text-align: right;
  font-size: 0.9em;
  font-weight: bold;
  margin-top: 4px;
}
</style>
